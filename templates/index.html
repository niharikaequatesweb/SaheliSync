<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SaheliSync - AI-Powered Roommate Matching</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}" />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body>

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <div class="avatar-container">
          <div class="sound-wave"></div>
          <div class="sound-wave"></div>
          <div class="sound-wave"></div>
          <div class="avatar">ðŸ‘­</div>
        </div>
        <h1>Welcome to SaheliSync ðŸ‘­</h1>
        <p>AI-powered roommate matcher that listens, understands, and finds your perfect match</p>
        <div class="cta-buttons">
          <button class="btn btn-primary" onclick="launchVoiceAgent()">ðŸŽ™ Talk to Saheli</button>
          <button class="btn btn-secondary" onclick="scrollToChat()">ðŸ’¬ Chat with Saheli</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Chat Section -->
  <section class="chat-section" id="chat-section">
    <div class="container">
      <div class="chat-container">
        <div class="chat-header">
          <h2>Chat with Saheli</h2>
          <p>Your AI roommate matching assistant</p>
        </div>

        <div class="chat-messages" id="chat-messages">
          <div class="message saheli">
            <div class="message-bubble">
              Hi there! I'm Saheli, your AI roommate matching assistant. Just click "Talk to Saheli" to begin. ðŸ˜Š
            </div>
          </div>
        </div>
        <!-- Chat input removed -->
      </div>
    </div>
  </section>

  <!-- Results Section -->
  <section class="results-section" id="results-section" style="display: none;">
    <div class="container">
      <div class="results-container" id="results-container">
        <!-- Results populated by JS -->
      </div>
    </div>
  </section>

  <!-- Omnidimension Voice Widget Script -->
  <script id="omnidimension-web-widget"
    async
    src="https://backend.omnidim.io/web_widget.js?secret_key=99a0f197aa77b8aad9ca8f9a237efe4e">
  </script>

  <!-- App Logic -->
  <script src="{{ url_for('static', filename='index.js') }}"></script>

  <!-- Interaction Functions -->
  <script>
    function scrollToChat() {
      document.getElementById('chat-section').scrollIntoView({ behavior: 'smooth' });
    }

    function launchVoiceAgent() {
      if (window.OmnidimWidget && typeof window.OmnidimWidget.open === 'function') {
        window.OmnidimWidget.open();
      } else {
        alert("Voice assistant is still loading. Please try again in a moment.");
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        const welcome = "Hi! I'm your AI voice agent. You can speak to me by clicking the microphone below.";
        const chatBox = document.getElementById('chat-messages');
        const bubble = document.createElement('div');
        bubble.className = 'message saheli';
        bubble.innerHTML = `<div class="message-bubble">${welcome}</div>`;
        chatBox.appendChild(bubble);
      }, 1000);
    });
  </script>

</body>
</html>
